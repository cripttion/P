{"ast":null,"code":"var _jsxFileName = \"/home/cripttion/Desktop/Projects/onlinePMS/client/src/Student/Verification.js\",\n  _s = $RefreshSig$();\nimport emailjs from '@emailjs/browser';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useEmailValidateState } from '../StateManagements/EmailValidState';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Verification = ({\n  studentDetails1,\n  index,\n  verificationStatus,\n  onVerification\n}) => {\n  _s();\n  const {\n    emailValidFirst,\n    setEmailValidForStudent1\n  } = useEmailValidateState();\n  const form = useRef();\n  const [verificationCode, setVerificationCode] = useState('');\n  const [enteredCode, setEnteredCode] = useState('');\n  useEffect(() => {\n    generateVerificationCode();\n  }, []); // Run once on component mount to generate the initial verification code\n\n  const generateVerificationCode = () => {\n    const code = Math.floor(100000 + Math.random() * 900000).toString(); // Generate a 6-digit code\n    setVerificationCode(code);\n  };\n  const sendEmail = e => {\n    e.preventDefault();\n    const emailParams = {\n      to_email: studentDetails1.email,\n      from_email: 'bibek.20scse1010849@galgotiasuniversity.edu.in',\n      message: `Your verification code for Project Registration is: ${verificationCode}`\n    };\n    console.log('Sending email with params:', emailParams);\n    emailjs.send('service_nnzh19f', 'template_4mqrnba', emailParams, '-L5otkMq3v6AAnlP1').then(result => {\n      console.log(result.text);\n      form.current.reset();\n      toast.success('Verification code sent successfully!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }).catch(error => {\n      console.log(error.text);\n      toast.error('Failed to send verification code. Please try again later.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    });\n  };\n  const verifyCode = async () => {\n    if (enteredCode === verificationCode) {\n      onVerification(index);\n      setEmailValidForStudent1(true);\n      try {\n        const formData = new FormData();\n        formData.append('file', file);\n        await axios.post('http://localhost:3001/sdUpload', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n      } catch (error) {}\n      toast.success('Verification successful!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    } else {\n      setEmailValidForStudent1(false);\n      toast.error('Invalid verification code. Please try again.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  };\n  console.log(verificationCode);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto p-4 bg-blue-100 rounded-md my-8\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: form,\n      onSubmit: sendEmail,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        children: \"You need to verify your email before proceeding:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"to_email\",\n        value: studentDetails1.email,\n        readOnly: true,\n        className: \"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\",\n        children: \"Send Verification Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), verificationStatus[index] ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-4 text-green-700 font-bold\",\n      children: \"Verification successful!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        children: \"Enter Verification Code:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setEnteredCode(e.target.value),\n        className: \"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: verifyCode,\n        className: \"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\",\n        children: \"Verify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(Verification, \"gxc9J8R+TnSFhKt3KNB6mWbwtrY=\", false, function () {\n  return [useEmailValidateState];\n});\n_c = Verification;\nvar _c;\n$RefreshReg$(_c, \"Verification\");","map":{"version":3,"names":["emailjs","React","useRef","useState","useEffect","toast","ToastContainer","useEmailValidateState","jsxDEV","_jsxDEV","Verification","studentDetails1","index","verificationStatus","onVerification","_s","emailValidFirst","setEmailValidForStudent1","form","verificationCode","setVerificationCode","enteredCode","setEnteredCode","generateVerificationCode","code","Math","floor","random","toString","sendEmail","e","preventDefault","emailParams","to_email","email","from_email","message","console","log","send","then","result","text","current","reset","success","autoClose","position","POSITION","TOP_RIGHT","catch","error","verifyCode","formData","FormData","append","file","axios","post","headers","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onSubmit","type","name","value","readOnly","onChange","target","onClick","_c","$RefreshReg$"],"sources":["/home/cripttion/Desktop/Projects/onlinePMS/client/src/Student/Verification.js"],"sourcesContent":["import emailjs from '@emailjs/browser';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useEmailValidateState } from '../StateManagements/EmailValidState';\nexport const Verification = ({studentDetails1,index,verificationStatus, onVerification }) => {\n    const {emailValidFirst,setEmailValidForStudent1}  = useEmailValidateState();\n    const form = useRef();\n    const [verificationCode, setVerificationCode] = useState('');\n    const [enteredCode, setEnteredCode] = useState('');\n \n    useEffect(() => {\n      generateVerificationCode();\n    }, []); // Run once on component mount to generate the initial verification code\n  \n    const generateVerificationCode = () => {\n      const code = Math.floor(100000 + Math.random() * 900000).toString(); // Generate a 6-digit code\n      setVerificationCode(code);\n    };\n\n  const sendEmail = (e) => {\n    e.preventDefault();\n\n    const emailParams = {\n      to_email: studentDetails1.email,\n      from_email: 'bibek.20scse1010849@galgotiasuniversity.edu.in',\n      message: `Your verification code for Project Registration is: ${verificationCode}`,\n    };\n\n    console.log('Sending email with params:', emailParams);\n\n    emailjs\n      .send('service_nnzh19f', 'template_4mqrnba', emailParams, '-L5otkMq3v6AAnlP1')\n      .then((result) => {\n        console.log(result.text);\n        form.current.reset();\n        toast.success('Verification code sent successfully!', {\n          autoClose: 5000,\n          position: toast.POSITION.TOP_RIGHT,\n        });\n      })\n      .catch((error) => {\n        console.log(error.text);\n        toast.error('Failed to send verification code. Please try again later.', {\n          autoClose: 5000,\n          position: toast.POSITION.TOP_RIGHT,\n        });\n      });\n  };\n\n  const verifyCode = async() => {\n    if (enteredCode === verificationCode) {\n      onVerification(index);\n      setEmailValidForStudent1(true);\n      try {\n        const formData = new FormData();\n      formData.append('file', file);\n  \n      await axios.post('http://localhost:3001/sdUpload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n        },\n      });\n  \n      } catch (error) {\n        \n      }\n\n      toast.success('Verification successful!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    } else {\n      setEmailValidForStudent1(false);\n      toast.error('Invalid verification code. Please try again.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\nconsole.log(verificationCode);\n  return (\n    <div className=\"max-w-md mx-auto p-4 bg-blue-100 rounded-md my-8\">\n      <ToastContainer />\n      <form ref={form} onSubmit={sendEmail}>\n        <label className=\"block text-gray-700 text-sm font-bold mb-2\">You need to verify your email before proceeding:</label>\n        <input\n          type=\"email\"\n          name=\"to_email\"\n          value={studentDetails1.email}\n          readOnly\n          className=\"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n        />\n        <button\n          type=\"submit\"\n          className=\"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\"\n        >\n          Send Verification Code\n        </button>\n      </form>\n\n      {verificationStatus[index] ? (\n        <p className=\"mt-4 text-green-700 font-bold\">Verification successful!</p>\n      )  : (\n        <div className=\"mt-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n            Enter Verification Code:\n          </label>\n          <input\n            type=\"text\"\n            onChange={(e) => setEnteredCode(e.target.value)}\n            className=\"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n          />\n          <button\n            onClick={verifyCode}\n            className=\"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\"\n          >\n            Verify\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}