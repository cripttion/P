{"ast":null,"code":"var _jsxFileName = \"/home/cripttion/Desktop/Projects/onlinePMS/client/src/Student/Verification2.js\",\n  _s = $RefreshSig$();\nimport emailjs from '@emailjs/browser';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Verification2 = ({\n  studentDetails2\n}) => {\n  _s();\n  const form = useRef();\n  const [verificationCode, setVerificationCode] = useState('');\n  const [enteredCode, setEnteredCode] = useState('');\n  const [isCodeVerified, setIsCodeVerified] = useState(false);\n  const [projectCode, setProjectCode] = useState('');\n  useEffect(() => {\n    generateVerificationCode();\n  }, []); // Run once on component mount to generate the initial verification code\n\n  const generateVerificationCode = () => {\n    const code = Math.floor(100000 + Math.random() * 900000).toString(); // Generate a 6-digit code\n    setVerificationCode(code);\n  };\n  const generateProjectCode = () => {\n    // Generate a unique 4-digit project code\n    const projectCode = `BT-${Math.floor(1000 + Math.random() * 9000)}`;\n    setProjectCode(projectCode);\n  };\n  const sendEmail = e => {\n    e.preventDefault();\n    const emailParams = {\n      to_email: studentDetails2.email,\n      from_email: 'bibek.20scse1010849@galgotiasuniversity.edu.in',\n      message: `Your verification code for Project Registration is: ${verificationCode}`\n    };\n    console.log('Sending email with params:', emailParams);\n    emailjs.send('service_nnzh19f', 'template_4mqrnba', emailParams, '-L5otkMq3v6AAnlP1').then(result => {\n      console.log(result.text);\n      form.current.reset();\n      toast.success('Verification code sent successfully!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n      // After successful verification, generate a project code\n      generateProjectCode();\n    }).catch(error => {\n      console.log(error.text);\n      toast.error('Failed to send verification code. Please try again later.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    });\n  };\n  const verifyCode = () => {\n    if (enteredCode === verificationCode) {\n      setIsCodeVerified(true);\n      toast.success('Verification successful!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    } else {\n      setIsCodeVerified(false);\n      toast.error('Invalid verification code. Please try again.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto p-4 bg-blue-100 rounded-md my-8\",\n    children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      ref: form,\n      onSubmit: sendEmail,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        children: \"You need to verify your email before proceeding:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        name: \"to_email\",\n        value: studentDetails2.email,\n        readOnly: true,\n        className: \"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\",\n        children: \"Send Verification Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), isCodeVerified ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-green-700 font-bold\",\n        children: \"Verification successful!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this), projectCode && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"mt-2 w-full bg-green-400 text-white p-2 rounded-md hover:bg-green-500 focus:outline-none focus:ring focus:border-green-300\",\n        onClick: () => alert(`Project Code: ${projectCode}`),\n        children: \"Generate Project Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        className: \"block text-gray-700 text-sm font-bold mb-2\",\n        children: \"Enter Verification Code:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        onChange: e => setEnteredCode(e.target.value),\n        className: \"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: verifyCode,\n        className: \"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\",\n        children: \"Verify\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(Verification2, \"LIVa/VjvQ3msuL1CANm1gOhsdUQ=\");\n_c = Verification2;\nvar _c;\n$RefreshReg$(_c, \"Verification2\");","map":{"version":3,"names":["emailjs","React","useRef","useState","useEffect","toast","ToastContainer","jsxDEV","_jsxDEV","Verification2","studentDetails2","_s","form","verificationCode","setVerificationCode","enteredCode","setEnteredCode","isCodeVerified","setIsCodeVerified","projectCode","setProjectCode","generateVerificationCode","code","Math","floor","random","toString","generateProjectCode","sendEmail","e","preventDefault","emailParams","to_email","email","from_email","message","console","log","send","then","result","text","current","reset","success","autoClose","position","POSITION","TOP_RIGHT","catch","error","verifyCode","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","onSubmit","type","name","value","readOnly","onClick","alert","onChange","target","_c","$RefreshReg$"],"sources":["/home/cripttion/Desktop/Projects/onlinePMS/client/src/Student/Verification2.js"],"sourcesContent":["import emailjs from '@emailjs/browser';\nimport React, { useRef, useState, useEffect } from 'react';\nimport { toast, ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nexport const Verification2 = ({ studentDetails2 }) => {\n  const form = useRef();\n  const [verificationCode, setVerificationCode] = useState('');\n  const [enteredCode, setEnteredCode] = useState('');\n  const [isCodeVerified, setIsCodeVerified] = useState(false);\n  const [projectCode, setProjectCode] = useState('');\n\n  useEffect(() => {\n    generateVerificationCode();\n  }, []); // Run once on component mount to generate the initial verification code\n\n  const generateVerificationCode = () => {\n    const code = Math.floor(100000 + Math.random() * 900000).toString(); // Generate a 6-digit code\n    setVerificationCode(code);\n  };\n\n  const generateProjectCode = () => {\n    // Generate a unique 4-digit project code\n    const projectCode = `BT-${Math.floor(1000 + Math.random() * 9000)}`;\n    setProjectCode(projectCode);\n  };\n\n  const sendEmail = (e) => {\n    e.preventDefault();\n\n    const emailParams = {\n      to_email: studentDetails2.email,\n      from_email: 'bibek.20scse1010849@galgotiasuniversity.edu.in',\n      message: `Your verification code for Project Registration is: ${verificationCode}`,\n    };\n\n    console.log('Sending email with params:', emailParams);\n\n    emailjs\n      .send('service_nnzh19f', 'template_4mqrnba', emailParams, '-L5otkMq3v6AAnlP1')\n      .then((result) => {\n        console.log(result.text);\n        form.current.reset();\n        toast.success('Verification code sent successfully!', {\n          autoClose: 5000,\n          position: toast.POSITION.TOP_RIGHT,\n        });\n        // After successful verification, generate a project code\n        generateProjectCode();\n      })\n      .catch((error) => {\n        console.log(error.text);\n        toast.error('Failed to send verification code. Please try again later.', {\n          autoClose: 5000,\n          position: toast.POSITION.TOP_RIGHT,\n        });\n      });\n  };\n\n  const verifyCode = () => {\n    if (enteredCode === verificationCode) {\n      setIsCodeVerified(true);\n      toast.success('Verification successful!', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    } else {\n      setIsCodeVerified(false);\n      toast.error('Invalid verification code. Please try again.', {\n        autoClose: 5000,\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto p-4 bg-blue-100 rounded-md my-8\">\n      <ToastContainer />\n      <form ref={form} onSubmit={sendEmail}>\n        <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n          You need to verify your email before proceeding:\n        </label>\n        <input\n          type=\"email\"\n          name=\"to_email\"\n          value={studentDetails2.email}\n          readOnly\n          className=\"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n        />\n        <button\n          type=\"submit\"\n          className=\"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\"\n        >\n          Send Verification Code\n        </button>\n      </form>\n\n      {isCodeVerified ? (\n        <div className=\"mt-4\">\n          <p className=\"text-green-700 font-bold\">Verification successful!</p>\n          {projectCode && (\n            <button\n              className=\"mt-2 w-full bg-green-400 text-white p-2 rounded-md hover:bg-green-500 focus:outline-none focus:ring focus:border-green-300\"\n              onClick={() => alert(`Project Code: ${projectCode}`)}\n            >\n              Generate Project Code\n            </button>\n          )}\n        </div>\n      ) : (\n        <div className=\"mt-4\">\n          <label className=\"block text-gray-700 text-sm font-bold mb-2\">\n            Enter Verification Code:\n          </label>\n          <input\n            type=\"text\"\n            onChange={(e) => setEnteredCode(e.target.value)}\n            className=\"w-full px-3 py-2 placeholder-gray-400 border rounded-md shadow-sm focus:outline-none focus:ring-blue-400 focus:border-blue-400\"\n          />\n          <button\n            onClick={verifyCode}\n            className=\"mt-4 w-full bg-blue-400 text-white p-2 rounded-md hover:bg-blue-500 focus:outline-none focus:ring focus:border-blue-300\"\n          >\n            Verify\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}